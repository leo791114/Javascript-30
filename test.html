<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JS Drum Kit</title>
    <link rel="stylesheet" href="Day one/style.css">
</head>

<body>

    <div class="keys">
        <div data-key="1" class="key">
            <kbd>1</kbd>
            <span class="sound">DO</span>
        </div>
        <div data-key="2" class="key">
            <kbd>2</kbd>
            <span class="sound">RE</span>
        </div>
        <div data-key="3" class="key">
            <kbd>3</kbd>
            <span class="sound">MI</span>
        </div>
        <div data-key="4" class="key">
            <kbd>4</kbd>
            <span class="sound">FA</span>
        </div>
        <div data-key="5" class="key">
            <kbd>5</kbd>
            <span class="sound">SOL</span>
        </div>
        <div data-key="6" class="key">
            <kbd>6</kbd>
            <span class="sound">LA</span>
        </div>
        <div data-key="7" class="key">
            <kbd>7</kbd>
            <span class="sound">SI</span>
        </div>
    </div>
    <audio data-key="2" src="./Day one/sounds/boom.wav"></audio>
    <audio data-key="1" src="./Day one/sounds/boom.wav"></audio>
    <audio data-key="3" src="./Day one/sounds/boom.wav"></audio>
    <audio data-key="4" src="./Day one/sounds/boom.wav"></audio>
    <audio data-key="5" src="./Day one/sounds/boom.wav"></audio>
    <audio data-key="6" src="./Day one/sounds/boom.wav"></audio>
    <audio data-key="7" src="./Day one/sounds/boom.wav"></audio>

    <script>
        function playAudio(e) {

            const happyBirthdaySong = ['5', '5', '6', '5', '1', '7', '5', '5', '6', '5', '2', '1', '5', '5', '5', '3',
                '1', '7', '6', '4', '4', '3', '1', '2', '1'
            ];

            for (var i = 0; i < happyBirthdaySong.length; i++) {

                var keyCode = happyBirthdaySong[i];
                const audio = document.querySelector(`audio[data-key="${keyCode}"]`);
                console.log(audio);
                if (!audio) return;
                const key = document.querySelector(`div[data-key="${keyCode}"]`);
                if (!key) return;
                audio.currentTime = 0;
                audio.play();
                key.classList.add('playing');
            }
        }

        function stopTransition(e) {
            if (e.propertyName !== 'transform') return;
            console.log(this === e.target);
            e.target.classList.remove('playing');
        }

        window.addEventListener('keydown', playAudio);
        const keys = Array.from(document.querySelectorAll('.key'));
        keys.forEach(key => key.addEventListener('transitionend', stopTransition));
    </script>

</body>

</html>